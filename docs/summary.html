<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.2.269">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Econometrics for Policy Analysis - 3&nbsp; OLS Explained</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1.6em;
  vertical-align: middle;
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./references.html" rel="next">
<link href="./module1.html" rel="prev">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit"
  }
}</script>

  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

</head>

<body class="nav-sidebar floating">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
    <div class="container-fluid d-flex justify-content-between">
      <h1 class="quarto-secondary-nav-title"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">OLS Explained</span></h1>
      <button type="button" class="quarto-btn-toggle btn" aria-label="Show secondary navigation">
        <i class="bi bi-chevron-right"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse sidebar-navigation floating overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="./">Econometrics for Policy Analysis</a> 
    </div>
      </div>
      <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
      </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Syllabus: PMAP 4041, Fall 2024</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./module1.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Data and Policy Studies</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./summary.html" class="sidebar-item-text sidebar-link active"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">OLS Explained</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./references.html" class="sidebar-item-text sidebar-link">References</a>
  </div>
</li>
    </ul>
    </div>
</nav>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#review-of-lines-and-functions" id="toc-review-of-lines-and-functions" class="nav-link active" data-scroll-target="#review-of-lines-and-functions"><span class="toc-section-number">3.1</span>  Review of Lines and Functions</a></li>
  <li><a href="#arrividerci-algebra." id="toc-arrividerci-algebra." class="nav-link" data-scroll-target="#arrividerci-algebra."><span class="toc-section-number">3.2</span>  Arrividerci, Algebra.</a></li>
  <li><a href="#an-extended-example" id="toc-an-extended-example" class="nav-link" data-scroll-target="#an-extended-example"><span class="toc-section-number">3.3</span>  An Extended Example</a>
  <ul class="collapse">
  <li><a href="#step-1-list-the-data" id="toc-step-1-list-the-data" class="nav-link" data-scroll-target="#step-1-list-the-data"><span class="toc-section-number">3.3.1</span>  Step 1: List the Data</a></li>
  <li><a href="#step-2-list-our-variables-we-solve-for" id="toc-step-2-list-our-variables-we-solve-for" class="nav-link" data-scroll-target="#step-2-list-our-variables-we-solve-for"><span class="toc-section-number">3.3.2</span>  Step 2: List Our Variables We Solve For</a></li>
  <li><a href="#step-3-write-out-the-objective-function" id="toc-step-3-write-out-the-objective-function" class="nav-link" data-scroll-target="#step-3-write-out-the-objective-function"><span class="toc-section-number">3.3.3</span>  Step 3: Write Out the Objective Function</a></li>
  <li><a href="#step-4-simplify-the-objective-function" id="toc-step-4-simplify-the-objective-function" class="nav-link" data-scroll-target="#step-4-simplify-the-objective-function"><span class="toc-section-number">3.3.4</span>  Step 4: Simplify the Objective Function</a></li>
  <li><a href="#step-5-simplify-the-objective-function-cont." id="toc-step-5-simplify-the-objective-function-cont." class="nav-link" data-scroll-target="#step-5-simplify-the-objective-function-cont."><span class="toc-section-number">3.3.5</span>  Step 5: Simplify the Objective Function, cont.</a></li>
  <li><a href="#step-6-take-partial-derivatives" id="toc-step-6-take-partial-derivatives" class="nav-link" data-scroll-target="#step-6-take-partial-derivatives"><span class="toc-section-number">3.3.6</span>  Step 6: Take Partial Derivatives</a></li>
  <li><a href="#step-7-get-the-betas" id="toc-step-7-get-the-betas" class="nav-link" data-scroll-target="#step-7-get-the-betas"><span class="toc-section-number">3.3.7</span>  Step 7: Get the Betas</a></li>
  <li><a href="#step-8-our-ols-line-of-best-fit" id="toc-step-8-our-ols-line-of-best-fit" class="nav-link" data-scroll-target="#step-8-our-ols-line-of-best-fit"><span class="toc-section-number">3.3.8</span>  Step 8: Our OLS Line of Best Fit</a></li>
  </ul></li>
  <li><a href="#after-running-regressions" id="toc-after-running-regressions" class="nav-link" data-scroll-target="#after-running-regressions"><span class="toc-section-number">3.4</span>  After Running Regressions</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title d-none d-lg-block"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">OLS Explained</span></h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  

</header>

<section id="review-of-lines-and-functions" class="level2" data-number="3.1">
<h2 data-number="3.1" class="anchored" data-anchor-id="review-of-lines-and-functions"><span class="header-section-number">3.1</span> Review of Lines and Functions</h2>
<p>In middle school, we learn about the basics of functions in that when we plug in a number, we get another number in return. For <span class="math inline">\(2x=y\)</span> for example, if we plug in 2, we get 4. If we plug in 5, we get 10. If you’re at the grocery store and grapes are 1 dollar and 50 cents per pound, we just weigh the grapes and multiply that number by 1.5. This could take the form of <span class="math inline">\((0,0), (1,1.5), (2,3)\)</span>, and so on. These points form a line, the equation for which being <span class="math inline">\(y=mx+b\)</span>. Here, <span class="math inline">\(y\)</span> is our outcome, <span class="math inline">\(m\)</span> is the change in the price of grapes for every new pound of grapes bought, and b is our value we pay if we get no grapes.</p>
<div class="cell" data-engine="jupyter" data-execution_count="1">
<div class="cell-output cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="summary_files/figure-html/cell-2-output-1.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
<p>The way we find the <span class="math inline">\(m\)</span> and <span class="math inline">\(b\)</span> for a straight line is the “rise over run” method, in this case</p>
<p><span class="math display">\[m = \frac{y_2 - y_1}{x_2 - x_1} = \frac{3 - 0}{2 - 0} = \frac{3}{2} = 1.5\]</span></p>
<p>For this case, the function for the line of price paid for grapes is <span class="math inline">\(y=1.5x\)</span>. Notice here how the line explains how much we pay perfectly (in other words, the line exactly matches the data points). This means our <em>residuals</em> <span class="math inline">\(u_i=y_i-\hat y_i\)</span> are 0, where <span class="math inline">\(y_i\)</span> maps on to the real data and <span class="math inline">\(\hat{y}_i\)</span> is the prediction from the line/function. Here, the letter “<span class="math inline">\(u_i\)</span>” is just a variable for the the distance from the predicted point to the observed point. If the observed values are 10 but we predict 11, then our residual is -1.</p>
<p>However, this is because we have a case where all the necessary information is known (price and weight). We know the price of grapes or gas or movie tickets, so we typically do not even need algebra here, we intuitively understand that this is how we calculate expenses. That is, we know from the above that we could calculate the amount of money we pay for grapes at 1 pound or a trillion pounds, assuming the price does not change. But…. what if the data we see are not nice and neat in terms of a function, e.g, <span class="math inline">\((20.52,29.32), (25.08,24.26), (19.94,29.42)\)</span>? As we can see here, there is simply no straight line that will fit to all of these points perfectly.</p>
<div class="cell" data-engine="jupyter" data-execution_count="2">
<div class="cell-output cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="summary_files/figure-html/cell-3-output-1.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
<p>Before, we simply would have to throw our hands up, in a sense, and say that there’s no solution. Normal algebra has failed us in that we cannot find a function which explains the points in this dataset. But, this is what the world is like, right? Take the idea of predicting crime rates in cities. We would presume some <em>function</em> exists that generates the crime rate for that city. Some cities are wealthier or poorer than others or of differing racial compositions, or will differ by factors like age composition or alcohol use. Thus… some cities have high crime rates, others have low crime rates, and it would be very unreasonable to expect to find a singular function that perfectly explains the variation in crime rates across one or more cities. After all, crime rates are a <em>random variable</em> in the sense that the number it takes on is not guaranteed. Sometimes, crime is high, other times its low(er).</p>
<p>So, what can we do? We can’t find a function for the line that perfectly explains the crime trends, or the data points in the plot above… But, how about we instead seek the best <em>possible</em> line, given our data points? The line which best <em>fits</em> (in that it minimizes the residuals) to the data, in that it does our best to approximate the data? To connect these ideas together, suppose I asked you to find the function for the line that tells me how much we pay for grapes, <em>even when I do not</em> give you the price. I only give you the weight of grapes you buy, and how much you paid.</p>
</section>
<section id="arrividerci-algebra." class="level2" data-number="3.2">
<h2 data-number="3.2" class="anchored" data-anchor-id="arrividerci-algebra."><span class="header-section-number">3.2</span> Arrividerci, Algebra.</h2>
<p>To do such a task, we’ve now reached a point in the course where simple algebra is no longer our best guide. We now <em>must</em> use calculus, specifically the baiscs of derivatives, to find the optimal solution. The derivative is the slope of a curve/line at a given point. One interesting property about derivatives is that when we set the derivative to 0 and solve for the variable, we reach a maximum or minimum, usually. For a realistic example, say we shoot a basketball off a 2 foot cliff, which produces a trajectory of <span class="math inline">\(h(t)= −5t^2 +20t+2\)</span>, where <span class="math inline">\(h(t)\)</span> is our height over time and the 2 represents the fact that we are standing 2 feet above ground, and the line itself represents the ball’s trajectory. We can find the <em>maximum</em> height of the ball by taking the derivative of the original quadratic function and solving it for 0.</p>
<div class="cell" data-engine="jupyter" data-execution_count="3">
<div class="cell-output cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="summary_files/figure-html/cell-4-output-1.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
<p>The power rule for dertivatives is where we subtract the exponent value by 1 and palce the original value to be multiplied by the base number. For example, the derivative of <span class="math inline">\(y=2x^3\)</span> is just <span class="math inline">\(6x^2\)</span>. Here is the derivative for the function of the ball’s trajectory using the power rule:</p>
<p><span class="math display">\[h(t) = -5t^2 + 20t + 2 = \frac{d}{dt}(-5t^2) + \frac{d}{dt}(20t) + \frac{d}{dt}(2)= -10t + 20\]</span></p>
<p>When we solve the derivative for 0, <span class="math inline">\(-10(2) + 20=0\)</span>, we get the maximum height of 22 feet after 2 seconds. Derivatives play a key role in minimizing or maximizing functions such as the ones we just did. We will use them to minimize the sum of squared residuals. This is known as the <em>ordinary leasy squares</em> approximation (OLS) for <em>linear regression</em>. OLS is the main estimator you’ll use for this class.</p>
<p>To introduce OLS, we can think of the equation of a line (<span class="math inline">\(y=mx+b\)</span>) where <span class="math inline">\(m\)</span> and <span class="math inline">\(b\)</span> are variables. Unlike the above examples where <span class="math inline">\(m\)</span> and <span class="math inline">\(b\)</span> were known variables, now we must solve for them. Unlike univariable calculus however, here we have multiple variables which each affect the function differently. And in this case, it makes perfect sense: if we wish to derive a function for how much we spend at the store, it’s quite possible we may spend money on multiple things and that those things will have different effects on how much you spend in total. With regression, we take the partial derivative with resepct to each variable, holding the other variable constant (that is, not considering the effect of the other variable). If this seems at all abstract to you, I sort of deviate from most econometrics textbooks and I formally derive the OLS betas. precisely, I give a detailed explanation of how the betas are calculated. Note that all of the steps below, Stata, R, or Python does (and optimizes!) for you. I only provide this derivation so you have a source to refer to when you wish to know how adn <em>why</em>, exactly, the machine returns the numbers that it returns to you.</p>
<p>Suppose we wish to attend a nightclub. We pay <em>some</em> cost of money to enter, and then we pay <em>some</em> amount of money per drink. However, unlike the real world where we know the price and entry fee up front and may calculate it, in this case we wish to derive the amount we pay up front, as well as the cost per drink using only reported data.</p>
<div class="cell" data-engine="jupyter" data-execution_count="4">
<div class="cell-output cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="summary_files/figure-html/cell-5-output-1.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="an-extended-example" class="level2" data-number="3.3">
<h2 data-number="3.3" class="anchored" data-anchor-id="an-extended-example"><span class="header-section-number">3.3</span> An Extended Example</h2>
<div class="callout-note callout callout-style-default callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>This is where you may start skimming. It is okay to not understand everything here.</p>
</div>
</div>
<section id="step-1-list-the-data" class="level3" data-number="3.3.1">
<h3 data-number="3.3.1" class="anchored" data-anchor-id="step-1-list-the-data"><span class="header-section-number">3.3.1</span> Step 1: List the Data</h3>
<p>Say that we have data that looks like <span class="math inline">\((0, 30), (1, 35), (2, 40)\)</span>, where <span class="math inline">\(x\)</span>= number of drinks we buy and <span class="math inline">\(y\)</span>=amount of money we spend that evening. If you want to, calculate the rise-over-run of these data points to derive <span class="math inline">\(m\)</span> and see what the answer might be in the end.</p>
<p><span class="math display">\[m = \frac{35 - 30}{1 - 0} = \ldots \]</span></p>
</section>
<section id="step-2-list-our-variables-we-solve-for" class="level3" data-number="3.3.2">
<h3 data-number="3.3.2" class="anchored" data-anchor-id="step-2-list-our-variables-we-solve-for"><span class="header-section-number">3.3.2</span> Step 2: List Our Variables We Solve For</h3>
<p>Our model of how much we pay given some entry fees and additional drink costs looks like:</p>
<p><span class="math display">\[y_i = \beta_0 + \beta_1x\]</span></p>
<p>Here, <span class="math inline">\(y_i\)</span> is how much we pay, <span class="math inline">\(\beta_0\)</span> is how much we pay to enter, <span class="math inline">\(\beta_1\)</span> is how much we pay for each additional drink, and <span class="math inline">\(x\)</span> is the number of drinks we get. Nothing is different, so far, from anything we’ve discussed above. I’ve simply substituted <span class="math inline">\(m\)</span> and <span class="math inline">\(b\)</span> with the Greek letter “beta”. Precisely, these are the betas we wish to derive.</p>
</section>
<section id="step-3-write-out-the-objective-function" class="level3" data-number="3.3.3">
<h3 data-number="3.3.3" class="anchored" data-anchor-id="step-3-write-out-the-objective-function"><span class="header-section-number">3.3.3</span> Step 3: Write Out the Objective Function</h3>
<p>OLS minimizes the sum of squared residuals. That is, it seeks the line which best fits the data, given some input value of <span class="math inline">\(x\)</span>. We can represent this with something called an objective function. <span class="math display">\[S = \underset{\beta_0,\beta_1}{\text{argmin}} \sum_{i=1}^{n} (y_i - \beta_0 - \beta_1x)^2\]</span> The word “argmin” here means “argument of the minimum”. The symbols underneath it, <span class="math inline">\(\beta_0,\beta_1\)</span>, mean these are the values we seek to estimate which minimize the prediction errors of the line. Everything after “argmin” is the objective function we are minimizing. Precisely, we wish to minimize the sum of the residuals squared. As above, <span class="math inline">\(y_i\)</span> is our observed data points (how much we pay in total given the <span class="math inline">\(i\)</span>th drink bought) 30, 35, and 40. The sigma symbol <span class="math inline">\(\sum_{i=1}^{n}\)</span> means we are adding up the <span class="math inline">\(i\)</span>th squared residual to the <span class="math inline">\(n\)</span>th data point/number of observations (in this case 3).</p>
<p>One may ask <em>why</em> we are squaring the residuals. First of all, the squared residuals means that we are dealing strictly with positive numbers (making the solution analytically easier to compute). Using the sum of absolute errors is a non-differentiable function. Also, suppose one observation has a residual of 40 and another of -40. The residuals would cancel out to 0. The squaring also has the property of penalizing worse predictions, realtive to simply summing the residuals. If the observed value is 20 but we predict 25, the error is -5. But if the observed value is 40, and we predict 80, the “absolute” error is -40 and the squared error of is 1600. If we did not square them, we would be treating all errors as created equally, and they are not (or, should not be for desirable statistical properties).</p>
</section>
<section id="step-4-simplify-the-objective-function" class="level3" data-number="3.3.4">
<h3 data-number="3.3.4" class="anchored" data-anchor-id="step-4-simplify-the-objective-function"><span class="header-section-number">3.3.4</span> Step 4: Simplify the Objective Function</h3>
<p>First, we can substitute the real values as well as our model for prediction into the objective function. We already know the values x-takes. You either buy no drinks, 1 drink, or 2. So with this information, we can now find the amount of money we pay up front (<span class="math inline">\(\beta_0\)</span>) and how much it costs for each drink (<span class="math inline">\(\beta_1\)</span>) <span class="math display">\[S = (30 - (\beta_0 + \beta_1 \cdot 0))^2 + (35 - (\beta_0 + \beta_1 \cdot 1))^2 + (40 - (\beta_0 + \beta_1 \cdot 2))^2\]</span></p>
</section>
<section id="step-5-simplify-the-objective-function-cont." class="level3" data-number="3.3.5">
<h3 data-number="3.3.5" class="anchored" data-anchor-id="step-5-simplify-the-objective-function-cont."><span class="header-section-number">3.3.5</span> Step 5: Simplify the Objective Function, cont.</h3>
<p>Here we simplify things. <span class="math display">\[S = (30 - \beta_0)^2 + (35 - \beta_0 - \beta_1)^2 + (40 - \beta_0 - 2\beta_1)^2\]</span></p>
<p>Note that the <span class="math inline">\(\beta_1 \cdot 0\)</span> term goes away because anything multiplied by 0 is just 0. We also simplify the second term because anything multiplied by 1 is just itself in the case of <span class="math inline">\(\beta_1 \cdot 1\)</span>.</p>
</section>
<section id="step-6-take-partial-derivatives" class="level3" data-number="3.3.6">
<h3 data-number="3.3.6" class="anchored" data-anchor-id="step-6-take-partial-derivatives"><span class="header-section-number">3.3.6</span> Step 6: Take Partial Derivatives</h3>
<p>To find the values of <span class="math inline">\(\beta_0\)</span> and <span class="math inline">\(\beta_1\)</span> that minimize <span class="math inline">\(S\)</span>, we take the partial derivatives of <span class="math inline">\(S\)</span> (for “Spending”) with respect to <span class="math inline">\(\beta_0\)</span> and <span class="math inline">\(\beta_1\)</span>. Recall that the partial derivative is simply how much the value of the function changes when our other variables that affect our outcome are held constant. In this case, the power rule and chain rule are our friend here. To hear more about combining the power rule and chain rule, <a href="https://www.youtube.com/watch?v=TI-j-fr6c4A">see here</a>.</p>
<ol type="1">
<li><strong>Partial derivative with respect to <span class="math inline">\(\beta_0\)</span>:</strong></li>
</ol>
<p>First, we do: <span class="math display">\[\frac{\partial S}{\partial \beta_0} = -2(30 - \beta_0) - 2(35 - \beta_0 - \beta_1) - 2(40 - \beta_0 - 2\beta_1).\]</span></p>
<p>Nothing crazy has happened here. I’ve simply brought the 2 down in front of each set of parentheses and subtracted 1 from the exponent. The <span class="math inline">\(-1\)</span> comes from the chain rule due to the fact that we consider <span class="math inline">\((30 - \beta_0)\)</span> as one function, and <span class="math inline">\((30 - \beta_0)^2\)</span> as another function. The “inner” function <span class="math inline">\((30 - \beta_0)\)</span> has a derivative of <span class="math inline">\(-1\)</span> for <span class="math inline">\(\beta_0\)</span>, since there’s no exponent attached to it and 20 is a constant, so its derivative is 0. Therefore, the derivative of the outer function <span class="math inline">\((30 - \beta_0)^2\)</span> (applying the power rule from above) is <span class="math inline">\(2(30 - \beta_0) \cdot -1\)</span>. Now, we simplify. First, distribute the <span class="math inline">\(-2\)</span> across each term inside the parentheses:</p>
<p><span class="math display">\[\frac{\partial S}{\partial \beta_0} = -2(30 - \beta_0) - 2(35 - \beta_0 - \beta_1) - 2(40 - \beta_0 - 2\beta_1)\]</span> <span class="math display">\[= -2(30) + 2\beta_0 - 2(35) + 2\beta_0 + 2\beta_1 - 2(40) + 2\beta_0 + 4\beta_1.\]</span></p>
<p>Then we combine like terms:</p>
<p><span class="math display">\[= -60 + 2\beta_0 - 70 + 2\beta_0 + 2\beta_1 - 80 + 2\beta_0 + 4\beta_1.\]</span></p>
<p>Now, we group the <span class="math inline">\(\beta_0\)</span> and <span class="math inline">\(\beta_1\)</span> terms together:</p>
<p><span class="math display">\[= (-60 - 70 - 80) + (2\beta_0 + 2\beta_0 + 2\beta_0) + (2\beta_1 + 4\beta_1).\]</span> Now, I factor out the 2 <span class="math display">\[= (-60 - 70 - 80) + 2(3\beta_0) + 2(\beta_1 + 2\beta_1).\]</span> So, we get <span class="math display">\[= -210 + 6\beta_0 + 6\beta_1.\]</span></p>
<p>Now we re-arrange by adding 210 to the RHS <span class="math display">\[6\beta_0 + 6\beta_1 = 210.\]</span></p>
<p>See how there are two 6s? We may now divide the right and left hand sides by 6 to further simplify <span class="math display">\[\beta_0 + \beta_1 = 35 \]</span></p>
<p>Okay, first parital calculated.</p>
<ol start="2" type="1">
<li><strong>Partial derivative with respect to <span class="math inline">\(\beta_1\)</span>:</strong></li>
</ol>
<p><span class="math display">\[
S = (30 - (\beta_0 + \beta_1 \cdot 0))^2 + (35 - (\beta_0 + \beta_1 \cdot 1))^2 + (40 - (\beta_0 + \beta_1 \cdot 2))^2
\]</span></p>
<p>Rewrite this as:</p>
<p><span class="math display">\[
S = (30 - \beta_0)^2 + (35 - (\beta_0 + \beta_1))^2 + (40 - (\beta_0 + 2\beta_1))^2
\]</span></p>
<p>We differentiate each term with respect to <span class="math inline">\(\beta_1\)</span>:</p>
<ol type="1">
<li>The first term:</li>
</ol>
<p><span class="math display">\[
\frac{\partial}{\partial \beta_1} (30 - \beta_0)^2 = 0
\]</span> (since it does not involve <span class="math inline">\(\beta_1\)</span>)</p>
<ol start="2" type="1">
<li>The second term:</li>
</ol>
<p><span class="math display">\[
\frac{\partial}{\partial \beta_1} (35 - (\beta_0 + \beta_1))^2 = \frac{\partial}{\partial \beta_1} (35 - \beta_0 - \beta_1)^2
\]</span></p>
<p>Using the chain rule:</p>
<p><span class="math display">\[
= 2 (35 - \beta_0 - \beta_1) \cdot (-1)
\]</span></p>
<p><span class="math display">\[
= -2 (35 - \beta_0 - \beta_1)
\]</span></p>
<ol start="3" type="1">
<li>The third term:</li>
</ol>
<p><span class="math display">\[
\frac{\partial}{\partial \beta_1} (40 - (\beta_0 + 2\beta_1))^2 = \frac{\partial}{\partial \beta_1} (40 - \beta_0 - 2\beta_1)^2
\]</span></p>
<p>Using the chain rule:</p>
<p><span class="math display">\[
= 2 (40 - \beta_0 - 2\beta_1) \cdot (-2)
\]</span></p>
<p><span class="math display">\[
= -4 (40 - \beta_0 - 2\beta_1)
\]</span></p>
<p>Now, sum the partial derivatives of the individual terms to get the partial derivative of <span class="math inline">\(S\)</span> with respect to <span class="math inline">\(\beta_1\)</span></p>
<p><span class="math display">\[
\frac{\partial S}{\partial \beta_1} = 0 + (-2 (35 - \beta_0 - \beta_1)) + (-4 (40 - \beta_0 - 2\beta_1))
\]</span></p>
<p>Simplify this expression:</p>
<p><span class="math display">\[
\frac{\partial S}{\partial \beta_1} = -2 (35 - \beta_0 - \beta_1) - 4 (40 - \beta_0 - 2\beta_1)
\]</span></p>
<p>Expand and combine like terms:</p>
<p><span class="math display">\[
\frac{\partial S}{\partial \beta_1} = -2(35 - \beta_0 - \beta_1) - 4(40 - \beta_0 - 2\beta_1)
\]</span></p>
<p><span class="math display">\[
= -2 \cdot 35 + 2 \beta_0 + 2 \beta_1 - 4 \cdot 40 + 4 \beta_0 + 8 \beta_1
\]</span></p>
<p><span class="math display">\[
= -70 + 2 \beta_0 + 2 \beta_1 - 160 + 4 \beta_0 + 8 \beta_1
\]</span></p>
<p><span class="math display">\[
= -230 + 6 \beta_0 + 10 \beta_1
\]</span></p>
<p>Just to set it up for the next section, we can again place the constant on the RHS after rearranging</p>
<p><span class="math display">\[
6 \beta_0 + 10 \beta_1 = 230
\]</span></p>
<p>Okay, second partial calculated.</p>
</section>
<section id="step-7-get-the-betas" class="level3" data-number="3.3.7">
<h3 data-number="3.3.7" class="anchored" data-anchor-id="step-7-get-the-betas"><span class="header-section-number">3.3.7</span> Step 7: Get the Betas</h3>
<p>Now we’ve set up our partial derivatives. Now we can algebraically get our betas. In order to find their values, though, we must solve a system of equations. The reason we must solve them as a system of equations is because we need for BOTH values to be the ones which minimize the distance between the predictions and the observed data. Here are the equations we must solve for (note, we have two because we have two variables, the entry fee and the drinks, but this can easily be extended to more variables) <span class="math display">\[\beta_0 + \beta_1 = 35\]</span> <span class="math display">\[6\beta_0 + 10\beta_1 = 230.\]</span></p>
<p>Here I use a method called substitution to solve the system, but there are many such ways we can solve this.</p>
<section id="step-7.1-solve-for-beta_0" class="level4" data-number="3.3.7.1">
<h4 data-number="3.3.7.1" class="anchored" data-anchor-id="step-7.1-solve-for-beta_0"><span class="header-section-number">3.3.7.1</span> Step 7.1: Solve for <span class="math inline">\(\beta_0\)</span>:</h4>
<p>The first step of substitution is to solve for one of our variables. I chose the first parital since it is the easiest.</p>
<p><span class="math display">\[\beta_0 = 35 - \beta_1\]</span> This is pretty simple, we just subtract <span class="math inline">\(\beta_1\)</span>. We know that the entry fee is some positive number. We also know that <span class="math inline">\(\beta_1\)</span> on the RHS has to be less than 35, as this would mean that we get in for free, which does not make sense given the problem at hand. We also know, logically, that <span class="math inline">\(\beta_0\)</span> can’t be 35, because then this means that drinks are free, which is also inconsistent with the logic of the problem. The reason I’m making such a fuss about this, is because when the regression gives us a number, the model predictions need to either make sense under existing constraints, or be interpreted sensibly. If the model predicts, for example, negative age or that you have negative cups of coffee per day, this suggests we need a different modeling strategy. It also means we must be sensible in interpreting our regression models– if negative values do not make sense for a certain variable, then restrict the interpretation of the model to values that do make sense.</p>
</section>
<section id="step-7.2-substitute-beta_0" class="level4" data-number="3.3.7.2">
<h4 data-number="3.3.7.2" class="anchored" data-anchor-id="step-7.2-substitute-beta_0"><span class="header-section-number">3.3.7.2</span> Step 7.2: Substitute <span class="math inline">\(\beta_0\)</span>:</h4>
<p>Now, since we know the equation for the constant (the entry fee), we can put this back in the partial derivative for <span class="math inline">\(\beta_1\)</span></p>
<p><span class="math display">\[6\beta_0 + 10\beta_1 = 230.\]</span></p>
<p>Once we do this, we can solve for <span class="math inline">\(\beta_1\)</span>. Here is the partial for <span class="math inline">\(\beta_1\)</span> with this replacement for <span class="math inline">\(\beta_0\)</span>. <span class="math display">\[6(35 - \beta_1) + 10\beta_1 = 230.\]</span> To solve, we distribute the 6 <span class="math display">\[210 - 6\beta_1 + 10\beta_1 = 230\]</span> and combine these terms <span class="math inline">\(- 6\beta_1 + 10\beta_1\)</span> together <span class="math display">\[210 + 4\beta_1 = 230.\]</span> Next, we subtract 210 from the RHS <span class="math display">\[4\beta_1 = 20.\]</span> Finally, we divide by 4 <span class="math display">\[\beta_1 = 5.\]</span></p>
<p>Now, we know our value for <span class="math inline">\(\beta_1\)</span>!!! We know that for each drink we get, we pay 5 more dollars. Since we now know <em>this</em>, we substitute 5 into <span class="math inline">\(\beta_0 + \beta_1 = 35\)</span> where <span class="math inline">\(\beta_1\)</span> is to get <span class="math inline">\(\beta_0\)</span>. We now have one equation to solve</p>
<p><span class="math display">\[\beta_0 + 5 = 35,\]</span></p>
<p>where we simply subtract 5 <span class="math display">\[\beta_0 = 30.\]</span></p>
<p>Now, we know the entry fee is 30 dollars.</p>
</section>
</section>
<section id="step-8-our-ols-line-of-best-fit" class="level3" data-number="3.3.8">
<h3 data-number="3.3.8" class="anchored" data-anchor-id="step-8-our-ols-line-of-best-fit"><span class="header-section-number">3.3.8</span> Step 8: Our OLS Line of Best Fit</h3>
<p>So, our line of best fit is <span class="math inline">\(\hat{y} = 30 + 5x\)</span>. The way we interpret this is is for every additional drink bought, you pay 5 more dollars. In fact, more precisely, <em>compared</em> to those who only wanted to get in the club, you spend 5 more dollars than they do, per each new drink you get. We can now predict how much money we would spend if we bought 5 drinks or 500 drinks.</p>
<p>At the outset, one may ask why we did this at all. Why bother with the partial derivative approach and the messy system of equations? The reason is because the parital derivative allows for us to (atttempt to) isolate the causal impact of <em>multiple</em> variables. In fact, we did so implicitly right here in this derivation! We considered the impact of BOTH entry fees and the number of drinks we bought too. If we wanted to add in another column, say the cost of an additional cigar or some such thing, all we would do is add another beta, <span class="math inline">\(\beta_2\)</span>, to the original objective function and multiply the corresponding values by whatever the costs were. We would then have three systems of equations to solve for, but the underlying principle of adding in other variables and finding the line that minimizes the distance between the line and points is the same.</p>
<div class="cell" data-engine="jupyter" data-execution_count="5">
<div class="cell-output cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="summary_files/figure-html/cell-6-output-1.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
</section>
</section>
<section id="after-running-regressions" class="level2" data-number="3.4">
<h2 data-number="3.4" class="anchored" data-anchor-id="after-running-regressions"><span class="header-section-number">3.4</span> After Running Regressions</h2>
<p>Next, we discuss…</p>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="./module1.html" class="pagination-link">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Data and Policy Studies</span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="./references.html" class="pagination-link">
        <span class="nav-page-text">References</span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->



</body></html>